#include <Arduino.h>
#include <Adafruit_SSD1306.h> 
#include <Adafruit_GFX.h>
#include <U8g2_for_Adafruit_GFX.h>
#include "multiplexedQTR.h"
#include <CD74HC4067.h>
#include "BluetoothSerial.h"

/* Bitmap section
--------------------------------------------------------------------------*/

// ' sprinter_screen', 124x60px
const unsigned char bitmap_screen_sprinter [] PROGMEM = {//listo
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0xff,0xff,0xff,
 0x3f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0xff,0xff,
 0xff,0x3f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,
 0x00,0x00,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,
 0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0xc0,0x00,0x00,0x00,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0xc0,0x00,0x00,0x00,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x30,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x30,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x30,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x00,0x00,0x30,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x00,0x00,0x30,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x00,0x00,0x0c,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x00,0x00,0x0c,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x00,0x00,0x03,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x00,0x00,0x03,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x00,0xc0,
 0xff,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x00,
 0xc0,0xff,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,
 0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,
 0x00,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0xc0,0x00,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0xc0,0x00,0x00,0x00,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0xc0,0xff,0x07,0x00,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0xc0,0xff,0x07,0x00,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x06,0x00,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x06,0x00,0x0c,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x00,0x03,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x00,0x03,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0xc0,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0xc0,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x00,0x30,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x00,0x30,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x00,
 0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,
 0x00,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x18,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x18,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x18,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x18,0xc0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x06,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x06,0x30,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x06,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x06,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x03,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x03,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xc1,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xc1,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x30,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x30,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x0c,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,
 0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x18,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x18,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0xf8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0xf8,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00   
};
// ' sumo_screen', 124x60px
const unsigned char bitmap_screen_sumo [] PROGMEM = {//listo
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x07,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x07,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,
 0x1f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x80,0x1f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x80,0x79,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x80,0x79,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x80,0xe1,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x80,0xe1,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x80,0x81,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x81,0x07,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x80,0x01,0x1e,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x80,0x01,0x1e,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x07,0x80,0x01,0x78,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x07,0x80,0x01,0x78,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1e,0x80,0x01,0xe0,0x01,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1e,0x80,0x01,0xe0,
 0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x78,0x80,0x01,
 0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x78,0x80,
 0x01,0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,
 0x81,0x01,0x1e,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0xe0,0x81,0x01,0x1e,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x80,0x87,0x81,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x80,0x87,0x81,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x9e,0xe1,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x9e,0xe1,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0xf8,0x79,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf8,0x79,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x1f,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x1f,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf8,0x79,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf8,0x79,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x9e,0xe1,0x01,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x9e,0xe1,
 0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x87,
 0x81,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,
 0x87,0x81,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0xe0,0x81,0x01,0x1e,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0xe0,0x81,0x01,0x1e,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x78,0x80,0x01,0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x78,0x80,0x01,0x78,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x1e,0x80,0x01,0xe0,0x01,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x1e,0x80,0x01,0xe0,0x01,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x80,0x07,0x80,0x01,0x78,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x07,0x80,0x01,0x78,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x80,0x01,0x1e,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x80,0x01,0x1e,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x81,0x07,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x81,0x07,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0xe1,
 0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,
 0xe1,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x80,0x79,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x80,0x79,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x80,0x1f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x80,0x1f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x80,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x80,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00  
};
// ' area_screen', 124x60px
const unsigned char bitmap_screen_area [] PROGMEM = { //listo
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xfc,
 0xff,0xff,0xff,0xff,0xff,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0xfc,0xff,0xff,0xff,0xff,0xff,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0c,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1c,0x00,0x00,
 0x00,0x00,0x00,0xfe,0xff,0xff,0x1f,0x00,0x00,0x00,0x00,0x00,0x00,0x1c,0x00,
 0x00,0x00,0x00,0x00,0xfe,0xff,0xff,0x1f,0x00,0x00,0x00,0x00,0x00,0x00,0x18,
 0x00,0x00,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x18,0x00,0x00,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x38,0x00,0x00,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x38,0x00,0x00,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x30,0x00,0x00,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x70,0x00,0x00,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x70,0x00,0x00,0x00,0x00,0x00,0x06,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x00,0x00,0x00,0x00,0x00,0x06,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x00,0x00,0x00,0x00,0x00,0x06,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x01,0x00,0x00,0x00,0x00,0x06,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x01,0x00,0x00,0x00,0x00,
 0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x03,0x00,0x00,0x00,
 0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x03,0x00,0x00,
 0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x00,
 0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x0e,
 0x00,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x1e,0x00,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x1c,0x00,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x38,0x00,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x70,0x00,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0xe0,0x00,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0xc0,0x01,0x00,0x00,0x00,0x06,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x03,0x00,0x00,0x00,0x06,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x07,0x00,0x00,0x00,0x06,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1e,0x00,0x00,0x00,0x06,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x3c,0x00,0x00,0x00,0x06,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x78,0x00,0x00,0x00,
 0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x00,0x00,
 0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x01,
 0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,
 0x07,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x3f,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0xfc,0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0xf0,0x0f,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x80,0x3f,0x00,0x06,0x00,0x00,0x00,0xfc,0xff,0xff,0xff,
 0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xfe,0xff,0xff,0x1f,0xfc,0xff,0xff,
 0xff,0xff,0xff,0xff,0xff,0xff,0xff,0xff,0x00,0xfe,0xff,0xff,0x1f,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00  
};

// Array of bitmap screens
const unsigned char* bitmap_screens[3] = {
	
  bitmap_screen_area,
	bitmap_screen_sprinter,
	bitmap_screen_sumo

};

// ' logo_area', 16x16px
const unsigned char bitmap_icon_area [] PROGMEM = {//listo
 0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x01,0x00,0x02,0xfe,0x02,0x02,0x04,
 0x02,0x04,0x02,0x08,0x02,0x10,0x02,0x60,0x02,0xff,0xfe,0x00,0x00,0x00,0x00,
 0x00,0x00  
};

// ' logo_sumo', 16x16px
const unsigned char bitmap_icon_sumo [] PROGMEM = {//listo
 0x80,0x01,0x80,0x03,0x80,0x06,0x88,0x0c,0x98,0x18,0xb0,0x0c,0xe0,0x06,0xc0,
 0x03,0xe0,0x06,0xb0,0x0c,0x98,0x18,0x88,0x0c,0x80,0x06,0x80,0x03,0x80,0x01,
 0x00,0x00  
};

// ' logo_sprinter', 16x16px
const unsigned char bitmap_icon_sprinter [] PROGMEM = {//listo
 0xe0,0x3f,0x20,0x20,0x20,0x10,0x10,0x08,0x10,0x04,0x08,0x1e,0x08,0x08,0x38,
 0x04,0x20,0x02,0x10,0x01,0x90,0x00,0x48,0x00,0x28,0x00,0x14,0x00,0x0c,0x00,
 0x00,0x00 
};

// Array of bitmap icons
const unsigned char* bitmap_icons[3] = {
  bitmap_icon_area,
	bitmap_icon_sprinter,
	bitmap_icon_sumo
};

// 'selected_background', 128x20px
const unsigned char epd_bitmap_selected_background [] PROGMEM = {//normal
 0xf8,0xff,0x1f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf8,0xff,
 0x1f,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x20,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x40,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x40,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x40,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x40,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x02,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x02,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x02,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x02,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x02,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x02,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x02,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x40,
 0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x40,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x40,0x02,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x40,0x04,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x20,0xf8,0xff,0x1f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0xf8,0xff,0x1f
};

// 'flag', 128x64px
const unsigned char epd_bitmap_flag [] PROGMEM = {
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,
 0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0xf0,0x01,0x00,0x00,0x00,0x00,0x80,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0xf8,0x03,0x00,0x00,0x00,0x00,0xc0,0x1f,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0xfc,0x07,0x00,0x00,0x00,0x00,0xe0,0x3f,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0xfe,0x0f,0x00,0x00,0x00,0x00,0xf0,0x7f,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0xe7,0x1c,0x00,0x00,0x00,0x00,0x38,0xe7,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x80,0x43,0x38,0x00,0x00,0x00,0x00,0x1c,0xc2,0x01,0x00,
 0x00,0x00,0x00,0x00,0x00,0xc0,0x21,0x74,0x00,0x00,0x00,0x00,0x2e,0x84,0x03,
 0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x73,0xee,0x00,0x00,0x00,0x00,0x77,0xce,
 0x07,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0xff,0xdf,0x01,0x00,0x00,0x80,0xfb,
 0xff,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0xb8,0x73,0x8e,0x03,0x00,0x00,0xc0,
 0x71,0xce,0x1d,0x00,0x00,0x00,0x00,0x00,0x00,0x1c,0x21,0x04,0x07,0x00,0x00,
 0xe0,0x20,0x84,0x38,0x00,0x00,0x00,0x00,0x00,0x00,0x0e,0x11,0xc2,0x0e,0x00,
 0x00,0x70,0x43,0x88,0x70,0x00,0x00,0x00,0x00,0x00,0x00,0x8f,0x3b,0xe7,0x1d,
 0x00,0x00,0xb8,0xe7,0xdc,0xf1,0x00,0x00,0x00,0x00,0x00,0x00,0xdf,0xff,0xff,
 0x3f,0x00,0x00,0xfc,0xff,0xff,0xfb,0x00,0x00,0x00,0x00,0x00,0x00,0xbe,0x3b,
 0xe7,0x7e,0x00,0x00,0x7e,0xe7,0xdc,0x7d,0x00,0x00,0x00,0x00,0x00,0x00,0x1e,
 0x11,0x42,0xe7,0x00,0x00,0xe7,0x42,0x88,0x78,0x00,0x00,0x00,0x00,0x00,0x00,
 0x3f,0x42,0x88,0xc3,0x01,0x80,0xc3,0x11,0x42,0xfc,0x00,0x00,0x00,0x00,0x00,
 0x80,0x7b,0xe7,0xdc,0x81,0x03,0xc0,0x81,0x3b,0xe7,0xde,0x01,0x00,0x00,0x00,
 0x00,0xc0,0xfd,0xff,0xff,0x00,0x07,0xe0,0x00,0xff,0xff,0xbf,0x03,0x00,0x00,
 0x00,0x00,0xe0,0xfe,0xe7,0x7c,0x00,0x0e,0x70,0x00,0x3e,0xe7,0x7f,0x07,0x00,
 0x00,0x00,0x00,0x70,0x9c,0x43,0x38,0x00,0x1c,0x38,0x00,0x1c,0xc2,0x39,0x0e,
 0x00,0x00,0x00,0x00,0x38,0x88,0x47,0x1c,0x00,0x38,0x1c,0x00,0x38,0xe2,0x11,
 0x1c,0x00,0x00,0x00,0x00,0x1c,0xc4,0xef,0x0e,0x00,0x70,0x0e,0x00,0x70,0xf7,
 0x23,0x38,0x00,0x00,0x00,0x00,0x2e,0xee,0xff,0x07,0x00,0xe0,0x07,0x00,0xe0,
 0xff,0x77,0x74,0x00,0x00,0x00,0x00,0x77,0xdf,0xf9,0x03,0x00,0xc0,0x03,0x00,
 0xc0,0x9f,0xfb,0xee,0x00,0x00,0x00,0x00,0xfb,0x8e,0xf8,0x01,0x00,0xc0,0x03,
 0x00,0x80,0x1f,0x71,0xdf,0x00,0x00,0x00,0x00,0x76,0x44,0xfc,0x00,0x00,0xe0,
 0x07,0x00,0x00,0x3f,0x22,0x6e,0x00,0x00,0x00,0x00,0x2e,0xe2,0xfe,0x01,0x00,
 0x70,0x0e,0x00,0x80,0x7f,0x47,0x74,0x00,0x00,0x00,0x00,0x1c,0xf7,0x9d,0x03,
 0x00,0x38,0x1c,0x00,0xc0,0xb9,0xef,0x38,0x00,0x00,0x00,0x00,0xb8,0xef,0x88,
 0x03,0x00,0x1c,0x38,0x00,0xc0,0x11,0xf7,0x1d,0x00,0x00,0x00,0x00,0x70,0x47,
 0xc0,0x01,0x00,0x0e,0x70,0x00,0x80,0x03,0xe2,0x0e,0x00,0x00,0x00,0x00,0xe0,
 0x22,0xe0,0x00,0x00,0x07,0xe0,0x00,0x00,0x07,0x44,0x07,0x00,0x00,0x00,0x00,
 0xc0,0x71,0x74,0x00,0x80,0x03,0xc0,0x01,0x00,0x2e,0x8e,0x03,0x00,0x00,0x00,
 0x00,0x80,0xfb,0x3e,0x00,0xc0,0x01,0x80,0x03,0x00,0x7c,0xdf,0x01,0x00,0x00,
 0x00,0x00,0x00,0x77,0x1f,0x00,0xe0,0x00,0x00,0x07,0x00,0xf8,0xee,0x00,0x00,
 0x00,0x00,0x00,0x00,0x2e,0x0e,0x00,0x70,0x00,0x00,0x0e,0x00,0x70,0x74,0x00,
 0x00,0x00,0x00,0x00,0x00,0x1c,0x07,0x00,0x38,0x00,0x00,0x1c,0x00,0xe0,0x38,
 0x00,0x00,0x00,0x00,0x00,0x00,0xb8,0x03,0x00,0x1c,0x00,0x00,0x38,0x00,0xc0,
 0x1d,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x01,0x00,0x0e,0x00,0x00,0x70,0x00,
 0x80,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x00,0x00,0x07,0x00,0x00,0xe0,
 0x00,0x00,0x06,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x03,0x00,0x00,
 0xc0,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x01,0x00,
 0x00,0x80,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x00,
 0x00,0x00,0x00,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00
};

// 'alita', 128x64px
const unsigned char bitmap_alita [] PROGMEM = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x80, 0x00, 0x00, 0x23, 0xff, 0x8f, 0x87, 0xff, 0xff, 0x80, 0x01, 0xc0, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x47, 0xff, 0x8f, 0x8f, 0xff, 0xff, 0x90, 0x01, 0xe0, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x8f, 0xff, 0x1f, 0x8f, 0xff, 0xff, 0xc0, 0x00, 0x60, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x01, 0x1f, 0xfe, 0x3f, 0x1f, 0xff, 0xff, 0xc8, 0x00, 0x50, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x12, 0x3f, 0xfc, 0x3f, 0x1f, 0xff, 0xff, 0xc4, 0x00, 0x20, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x04, 0x7f, 0xfc, 0x7e, 0x3f, 0xff, 0xff, 0xe4, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x48, 0xff, 0xf8, 0xfe, 0x3f, 0xff, 0xff, 0xe0, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x91, 0xff, 0xf0, 0xfc, 0x7f, 0xff, 0xff, 0xf0, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x01, 0x33, 0xff, 0xf1, 0xfc, 0x7f, 0xff, 0xff, 0xf0, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x02, 0x47, 0xff, 0xe3, 0xf8, 0xff, 0xff, 0xff, 0xe0, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x0f, 0xff, 0xc3, 0xf8, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x07, 0xff, 0xc7, 0xf1, 0xff, 0xff, 0xf8, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0x8f, 0xf1, 0xff, 0xff, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0x1f, 0xf1, 0xff, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x1f, 0xe3, 0xff, 0xf0, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0xc7, 0xff, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x40, 0x00, 0x3f, 0xc7, 0xff, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0xe0, 0x00, 0x7f, 0x87, 0xff, 0x00, 0x60, 0x0c, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0xe0, 0x00, 0x3f, 0x8f, 0xfe, 0x00, 0xe0, 0x0e, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x10, 0x08, 0xc0, 0x00, 0x3f, 0x0f, 0xfc, 0x10, 0xc0, 0x0e, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x20, 0x1c, 0x00, 0x00, 0x0f, 0x1f, 0xfc, 0x20, 0x00, 0x0c, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x60, 0x3c, 0x00, 0x03, 0x0e, 0x3f, 0xf9, 0xc8, 0x00, 0x0c, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0xc0, 0x3c, 0x00, 0x01, 0xcc, 0x3f, 0xfb, 0xcc, 0x00, 0x1c, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x01, 0xc0, 0x1c, 0x00, 0x01, 0xfc, 0x7f, 0xff, 0x8c, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x01, 0x80, 0x1e, 0x03, 0x0d, 0xf8, 0x7f, 0xff, 0x9e, 0x01, 0x38, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x03, 0x00, 0x0f, 0x03, 0x1c, 0xf8, 0xff, 0xff, 0x9f, 0x01, 0xf0, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x06, 0x00, 0x07, 0x80, 0x3c, 0xf0, 0xff, 0xff, 0x9f, 0x81, 0xf0, 0x02, 0x00, 0x00, 0x00, 
0x00, 0x06, 0x06, 0x07, 0xfc, 0x3c, 0xe1, 0xff, 0xff, 0x9f, 0xff, 0xe0, 0x22, 0x00, 0x00, 0x00, 
0x00, 0x04, 0x0f, 0x81, 0xfc, 0x7c, 0xa1, 0xff, 0xfe, 0x1f, 0xff, 0x80, 0x63, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x1c, 0xc0, 0x78, 0x1e, 0x03, 0xff, 0xfe, 0x3e, 0x7f, 0x00, 0x63, 0x00, 0x00, 0x00, 
0x00, 0x02, 0x18, 0x70, 0x00, 0x38, 0x07, 0xff, 0xff, 0x0e, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 
0x00, 0x02, 0x3b, 0x9c, 0x01, 0xe0, 0x87, 0xff, 0xff, 0x87, 0xc0, 0x08, 0xe1, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x37, 0xef, 0xc3, 0xc1, 0x0f, 0xff, 0xff, 0x71, 0xfd, 0xd2, 0xe1, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x23, 0xf8, 0x42, 0x00, 0x0f, 0xff, 0xff, 0x7e, 0x7f, 0x07, 0xe1, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x43, 0xff, 0x81, 0x80, 0x1f, 0xff, 0xfe, 0xfc, 0xf0, 0xff, 0xe0, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x41, 0xff, 0x8f, 0xc0, 0x3f, 0xff, 0xff, 0x39, 0xff, 0xfd, 0xc0, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x50, 0xff, 0x1f, 0xf0, 0x3f, 0xff, 0xff, 0xe3, 0xff, 0xfd, 0xb0, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x90, 0xfe, 0x3f, 0xe0, 0x7f, 0xff, 0xff, 0xfb, 0xff, 0xfb, 0x20, 0x00, 0x00, 0x00, 
0x00, 0x08, 0xba, 0x7c, 0x3f, 0x30, 0xff, 0xff, 0xff, 0xff, 0xbf, 0xfa, 0x40, 0x00, 0x00, 0x00, 
0x00, 0x10, 0xfd, 0x3c, 0x71, 0xf0, 0xff, 0xff, 0xff, 0xff, 0xef, 0xf8, 0xc0, 0x00, 0x00, 0x00, 
0x00, 0x00, 0xfe, 0x18, 0x1f, 0xe1, 0xff, 0xff, 0xff, 0xff, 0xff, 0xbd, 0x80, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x7f, 0x00, 0xff, 0xc3, 0xff, 0xfb, 0xff, 0xff, 0xff, 0xd3, 0x00, 0x10, 0x00, 0x00, 
0x00, 0x00, 0x7f, 0x41, 0xff, 0xc3, 0xff, 0xfb, 0xff, 0xff, 0xff, 0xe6, 0x10, 0x10, 0x00, 0x00, 
0x00, 0x00, 0x3f, 0x83, 0xff, 0x87, 0xff, 0xd9, 0xff, 0xff, 0xff, 0xf4, 0x30, 0x18, 0x00, 0x00, 
0x00, 0x00, 0x3f, 0xc7, 0xff, 0x0f, 0xff, 0xf1, 0xff, 0xff, 0xff, 0xf0, 0x70, 0x18, 0x00, 0x00, 
0x00, 0x00, 0x3f, 0x87, 0xfe, 0x1f, 0xff, 0xc1, 0xff, 0xff, 0xff, 0xf8, 0xf0, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x1f, 0x0f, 0xfe, 0x1f, 0xff, 0xc3, 0xff, 0xff, 0xff, 0xf9, 0xf0, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x1f, 0x0f, 0xfc, 0x3f, 0xff, 0xf7, 0xff, 0xff, 0xff, 0xf9, 0xf0, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

// 'calibration', 128x64px
const unsigned char bitmap_calibration [] PROGMEM = {
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x80,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x80,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0xe0,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0xe0,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0xf0,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x0f,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x0f,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x0f,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x0f,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x0f,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,0x0f,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xf0,
 0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0xf0,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0xf0,0x0f,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0xe0,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0xe0,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0xe0,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0xe0,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x07,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x07,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x07,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xe0,0x07,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x03,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x03,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x03,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,0x03,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0xc0,
 0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0xc0,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0xc0,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0xc0,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x80,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x80,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,0x01,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x80,
 0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0xc0,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0xc0,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x80,0x01,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
 0x00,0x00,0x00,0x00 
};

/* End of bitmap section
--------------------------------------------------------------------------*/

// define display size in pixels
#define SCREEN_WIDTH 128
#define SCREEN_HEIGHT 64
#define OLED_RESET -1

Adafruit_SSD1306 display(SCREEN_WIDTH, SCREEN_HEIGHT, &Wire, OLED_RESET);
U8G2_FOR_ADAFRUIT_GFX u8g2_for_adafruit_gfx;

// Define motor pins
#define PIN_MA1 26 // right
#define PIN_MA2 27
#define PIN_MB1 16 // left
#define PIN_MB2 17

// Define display buttons 
#define PIN_SELECT 18 //18
#define PIN_DOWN 5 //5

#define PIN_LED 23
 
multiplexedQTR qtr;

// Waits untill a modality is selected
void Standby(){

  analogWrite (PIN_MA1, LOW);
  analogWrite (PIN_MA2, LOW);
  analogWrite (PIN_MB1, LOW);
  analogWrite (PIN_MB2, LOW);

}

/* Menu section
--------------------------------------------------------------------------*/

const int NUM_MODALITIES = 3; 
const int MAX_ITEM_LENGTH = 20;

// Defines a default order for modalities and their respective icons and names
char menu_items [NUM_MODALITIES] [MAX_ITEM_LENGTH] = {
  
  { "Area cleaner" }, 
  { "Sprinter" }, 
  { "Sumo" }, 

};

enum screens {

  selection,
  modality,
  calibration,
  flags,

};

enum modalities {

  areaCleaner,
  sprinter,
  sumo,

};

modalities selected = areaCleaner;

screens current_screen = selection;

int next;
int previous;

int progress;

void DrawProgressBar() {
  
  for(progress = 0; progress <= 128; progress ++){

    display.clearDisplay();
    display.drawXBitmap( 0, 0, bitmap_screens[selected], 128, 64, WHITE);
    display.drawRect(0, 0, 128, 64, BLACK);
    display.fillRect(progress, 0, 128, 64, BLACK);
    display.display();

  }

}

// Prints a menu
void DisplayMenu(){

  if (current_screen == selection) {

    display.clearDisplay();

    // Prints previous item name
    u8g2_for_adafruit_gfx.setFontMode(1);
    u8g2_for_adafruit_gfx.setFontDirection(0);
    u8g2_for_adafruit_gfx.setForegroundColor(WHITE);
    u8g2_for_adafruit_gfx.setFont(u8g2_font_7x14_mf);
    u8g2_for_adafruit_gfx.setCursor(25, 15);
    u8g2_for_adafruit_gfx.print(F(menu_items [previous]));

    // Prints selected item name
    u8g2_for_adafruit_gfx.setFontMode(1);
    u8g2_for_adafruit_gfx.setFontDirection(0);
    u8g2_for_adafruit_gfx.setForegroundColor(WHITE);
    u8g2_for_adafruit_gfx.setFont(u8g2_font_7x14B_mf);
    u8g2_for_adafruit_gfx.setCursor(30, 37);
    u8g2_for_adafruit_gfx.print(F(menu_items [selected]));
  
    // Prints next item name
    u8g2_for_adafruit_gfx.setFontMode(1);
    u8g2_for_adafruit_gfx.setFontDirection(0);
    u8g2_for_adafruit_gfx.setForegroundColor(WHITE);
    u8g2_for_adafruit_gfx.setFont(u8g2_font_7x14_mf);
    u8g2_for_adafruit_gfx.setCursor(25, 59);
    u8g2_for_adafruit_gfx.print(F(menu_items [next]));
    
    // Prints selection frame
    display.drawXBitmap ( 0, 22, epd_bitmap_selected_background, 128, 20, WHITE);
    
    // Prints previous item icon
    display.drawXBitmap ( 4, 2, bitmap_icons[previous], 16, 16, WHITE);

    // Prints selected item icon
    display.drawXBitmap ( 4, 24, bitmap_icons[selected], 16, 16, WHITE);

    // Prints next item icon
    display.drawXBitmap ( 4, 46, bitmap_icons[next], 16, 16, WHITE);

    display.display();

  } 
  else if (current_screen == modality && selected == areaCleaner) {

    display.clearDisplay();
      
    DrawProgressBar();

    current_screen = flags;

    display.display();

  }
  else if (current_screen == flags){

    display.clearDisplay();

    display.drawXBitmap( 0, 0, epd_bitmap_flag, 128, 64, WHITE);

    display.display();

  }
  else if (current_screen == modality && selected == sumo){

    bool blink = true;

    //if (!SerialBT.connected()) {
      
      if (blink) {
        
        display.clearDisplay();
        
        display.drawXBitmap( 0, 0, bitmap_screens[selected], 128, 64, WHITE);
        
        display.display();
        
        blink = false;
      
      } 
      else {
        
        display.clearDisplay();
        display.display();
        
        blink = true;
      
      }

      delay(250);

    /*}
    else {
    
      display.clearDisplay();

      display.drawXBitmap( 0, 0, bitmap_screens[selected], 128, 64, WHITE);
        
      display.display();
    
    }*/

  }
  else if (current_screen == modality && selected == sprinter){

    display.clearDisplay();

    display.drawXBitmap( 0, 0, bitmap_screens[selected], 128, 64, WHITE);

    display.display();

  }

}

/* End of menu section
--------------------------------------------------------------------------*/
/* Sprinter section */

const uint8_t SensorCount = 8;
uint16_t sensorValues[SensorCount];

int position;

// Gets line position
int getPosition(){

  position = qtr.readLineWhite(sensorValues);
  return position;

}

// Calibrates sprinters QTR sensors
void StartSprinterCalibration(){

  qtr.setTypeAnalog();
  qtr.setSensorPins((const uint8_t[]){0, 1, 2, 3, 4, 5, 6, 7}, SensorCount); 

  delay(500);

  display.clearDisplay();

  // Prints calibration big icon
  display.drawXBitmap( 0, 0, bitmap_calibration, 124, 64, WHITE);

  display.display();

  for (uint16_t i = 0; i < 350; i++){
        
    qtr.calibrate();
    
  }

  current_screen = modality;

}

int setPoint = 5200; // Sets line position

int proportional = 0;
int derivative = 0;
int integral = 0;
int lastError = 0;

int maxSpeed = 125;
int minSpeed = 85;
int speed = 105;

// PID const
float kp = 0.013;
float ki = 0;
float kd = 0;
float pid;

//PID control system code
void StartSprinterModality(){

  position = getPosition();

  proportional = position - setPoint; // Newest error
  integral += proportional; // Integral of the error
  derivative = proportional - lastError; // Derivative of the error

  // PID aftermath
  pid = (proportional * kp) + (integral * ki) + (derivative * kd);
    
  lastError = proportional; // Saves last error

  float pidRight = speed + pid;
  float pidLeft = speed - pid;

  // Defines speed limits for right motor
  if (pidRight > maxSpeed){pidRight = maxSpeed;} 
  else if (pidRight < minSpeed){pidRight = minSpeed;}

  // Defines speed limits for left motor
  if (pidLeft > maxSpeed){pidLeft = maxSpeed;} 
  else if (pidLeft < minSpeed){pidLeft = minSpeed;}

  // Defines turning speed
  if (pidRight <= minSpeed&& pidLeft > minSpeed){ // Turns right
    
    analogWrite(PIN_MA1, 0);
    analogWrite(PIN_MA2, pidRight);
    analogWrite(PIN_MB1, pidLeft);
    analogWrite(PIN_MB2, 0);

  } else if (pidLeft <= minSpeed && pidRight > minSpeed){ // Turns left

    analogWrite(PIN_MA1, pidRight);
    analogWrite(PIN_MA2, 0);
    analogWrite(PIN_MB1, 0);
    analogWrite(PIN_MB2, pidLeft);
  
  } else { // Goes stright

    analogWrite(PIN_MA1, pidRight);
    analogWrite(PIN_MA2, 0);
    analogWrite(PIN_MB1, pidLeft);
    analogWrite(PIN_MB2, 0);

  }

}

/* End of sprinter section
--------------------------------------------------------------------------*/
/* SerialBT section */

bool position_and_pid = false;

BluetoothSerial SerialBT;

char message = SerialBT.read();

#if !defined(CONFIG_BT_ENABLED) || !defined(CONFIG_BLUEDROID_ENABLED)
#error Bluetooth in not enabled! Plese run 'make menuconfig' to and enable it
#endif

void DisplayPositionAndPid() {

  SerialBT.print("- position =");
  SerialBT.println(position);

  SerialBT.print("- pid =");
  SerialBT.println(pid);

}

// Prints SerialBT menu
void DisplayMenuBT(){

  // clean the serial
  for (int i = 0; i < 10; i++) {
    
    SerialBT.println("");
  
  }
  // probar a sacar el for para que el menú se lea mejor
  // y probar a meter todo el menú en una sola función
  // de paso hacé lo del ticker para que muestre la posición cada un segundo, vago
  // cada cinco segundo refrescar el menú si es posible


  SerialBT.println("Configuracion Actual:");

  SerialBT.print("- KP = ");
  SerialBT.println(kp);

  SerialBT.print("- KD = ");
  SerialBT.println(kd);

  SerialBT.print("- SETPOINT = ");
  SerialBT.println(setPoint);
  
  SerialBT.print("- MAXSPEED = ");
  SerialBT.println(maxSpeed);

  SerialBT.print("- MINSPEED = ");
  SerialBT.println(minSpeed);

  SerialBT.print("- SPEED = ");
  SerialBT.println(speed);

  /*SerialBT.println(" (x) KP + 0.01 / (z) KP - 0.01");
  SerialBT.println(" (t) KP + 0.001 / (g) KP - 0.001");

  SerialBT.println(" (p) KD + 0.01 / (n) KD - 0.01");
  SerialBT.println(" (u) KD + 0.001 / (j) KD - 0.001");

  SerialBT.println(" (b) setPoint + 100 / (c) setPoint - 100");

  SerialBT.println(" (q) maxSpeed + 5 / (a) maxSpeed - 5");
  SerialBT.println(" (w) minSpeed + 5 / (s) minSpeed - 5");
  SerialBT.println(" (e) speed + 5 / (d) speed - 5");*/

}

void StartTelemetry(){

  message = SerialBT.read();

  if(position_and_pid) {DisplayPositionAndPid();}

  switch (message) {

    case 'b': {
      
      setPoint += 100;
      DisplayMenuBT();
      break;
    
    }
    case 'c': {
      
      setPoint -= 100;
      DisplayMenuBT();
      break;
    
    }
    case 'q': {
      
      maxSpeed += 5;
      DisplayMenuBT();
      break;
    
    }
    case 'a': {
      
      maxSpeed -= 5;
      DisplayMenuBT();
      break;
    
    }
    case 'w': {
      
      minSpeed += 5;
      DisplayMenuBT();
      break;
    
    }
    case 's': {
      
      minSpeed -= 5;
      DisplayMenuBT();
      break;
    
    }
    case 'e': {

      speed += 5;
      DisplayMenuBT();
      break;

    }
    case 'd': {

      speed -= 5;
      DisplayMenuBT();
      break;

    }
    case 't': {
      
      kp += 0.001;
      DisplayMenuBT();
      break;
    
    }
    case 'g': {
      
      kp -= 0.001;
      DisplayMenuBT();
      break;
    
    }
    case 'x': {
      
      kp += 0.01;
      DisplayMenuBT();
      break;
    
    }
    case 'z': {
      
      kp -= 0.01;
      DisplayMenuBT();
      break;
    
    }
    case 'u': {
      
      kd += 0.01;
      DisplayMenuBT();
      break;
    
    }
    case 'j': {
      
      kd -= 0.01;
      DisplayMenuBT();
      break;
    
    }
    case 'p': {
      
      kd += 0.1;
      DisplayMenuBT();
      break;
    
    }
    case 'n': {
      
      kd -= 0.1;
      DisplayMenuBT();
      break;
    
    }
    case 'r': {

      position_and_pid = !position_and_pid;
      break;

    }
  
  }

}

/* End of SerialBT section
--------------------------------------------------------------------------*/
/* Area cleaner section */

#define PIN_SIG 34

// Sharp
int sharp_left;
int sharp_right;
int sharp_front_right;
int sharp_front;
int sharp_front_left;

int qre_right;
int qre_left;
int qre_back;

int low_speed = 100;
int mid_speed = 150;
int full_speed = 200;

int signal_input;

CD74HC4067 my_mux(4, 25, 33, 32); // s0, s1, s2, s3

void MoveLeft() {

  analogWrite(PIN_MA1, mid_speed);
  analogWrite(PIN_MA2, 0);
  analogWrite(PIN_MB1, 0);
  analogWrite(PIN_MB2, mid_speed);

}

void MoveRight() {

  analogWrite(PIN_MA1, 0);
  analogWrite(PIN_MA2, mid_speed);
  analogWrite(PIN_MB1, mid_speed);
  analogWrite(PIN_MB2, 0);

}

void MoveSoftLeft() {

  analogWrite(PIN_MA1, low_speed);
  analogWrite(PIN_MA2, 0);
  analogWrite(PIN_MB1, 0);
  analogWrite(PIN_MB2, low_speed);

}

void MoveSoftRight() {

  analogWrite(PIN_MA1, 0);
  analogWrite(PIN_MA2, low_speed);
  analogWrite(PIN_MB1, low_speed);
  analogWrite(PIN_MB2, 0);

}

void MoveStop() {

  analogWrite(PIN_MA1, 0);
  analogWrite(PIN_MA2, 0);
  analogWrite(PIN_MB1, 0);
  analogWrite(PIN_MB2, 0);

}

void MoveReverse() {

  analogWrite(PIN_MA1, 0);
  analogWrite(PIN_MA2, full_speed);
  analogWrite(PIN_MB1, 0);
  analogWrite(PIN_MB2, full_speed);

}

void MoveForward() {
  
  analogWrite(PIN_MA1, full_speed);
  analogWrite(PIN_MA2, 0);
  analogWrite(PIN_MB1, full_speed);
  analogWrite(PIN_MB2, 0);

}

void MoveBackwards() {

  analogWrite(PIN_MA1, 0);
  analogWrite(PIN_MA2, full_speed);
  analogWrite(PIN_MB1, 0);
  analogWrite(PIN_MB2, full_speed);

}

void ReadCleanerSensors() {

  for (int x = 8; x < 15; x++) {
    
    my_mux.channel(x);
  
    signal_input = analogRead(PIN_SIG);

    switch (x) {

      case 8: {
        
        sharp_right = signal_input;
        
        SerialBT.print("Right sharp =");
        SerialBT.println(signal_input);

      }
      case 9: {
        
        sharp_front_right = signal_input;

        SerialBT.print("Front Right sharp =");
        SerialBT.println(signal_input);

      }
      case 10: {
        
        sharp_front = signal_input;

        SerialBT.print("Front sharp =");
        SerialBT.println(signal_input);

      }
      case 11: {
        
        sharp_front_left = signal_input;
        
        SerialBT.print("Front Left sharp =");
        SerialBT.println(signal_input);
      
      }
      case 12: {
        
        sharp_left = signal_input;
        
        SerialBT.print("Left sharp =");
        SerialBT.println(signal_input);
        
      }
      /*case 13: {

        qre_right = signal_input;

      }
      case 14: {

        qre_back = signal_input;

      }
      case 15: {

        qre_left = signal_input;

      }*/

    }
  
  }

}

void StartAreaCleanerModality(){

  //Aclaraciones, no se usan los qre Front_Right ni Front_Left por ahora porque es solo para probar que onda
  //Tampoco se usan los qre de los costados, solo el back

  int Atacar_Forward = 0;  //Para Definir cuando esta atacando y no se frene por estar el objeto muy pegado
  int Objeto_Derecha = 0;  //Mientras ataca detectar objetos a los costados
  int Objeto_Derecha_Time;  //Si detecta, que tan lejos estan
  int Objeto_Izquierda = 0;
  int Objeto_Izquierda_Time;

  ReadCleanerSensors();

while (qre_back > 500) {      //Ataca mientras los qre esten en el blanco
  if (sharp_front < 1100 && sharp_left > 1100 && sharp_right > 1100) {   //Puede que el signo del qre este mal XD habiria que probarlo
    Atacar_Forward = 1;
    Objeto_Izquierda = 0;
    Objeto_Derecha = 0;
  } 
  if (sharp_front > 1100 && sharp_left < 1100 && sharp_right > 1100) {
    Atacar_Forward = 0;
    Objeto_Izquierda = 1;
    Objeto_Derecha = 0;
  }
  if (sharp_front > 1100 && sharp_left > 1100 && sharp_right < 1100) {
    Atacar_Forward = 0;
    Objeto_Izquierda = 0;
    Objeto_Derecha = 1;
  }
  else {
    MoveStop();
  }
}

  while (Atacar_Forward == 1) {   //Mientras atacabas ¿Viste algo a los costados?
    MoveForward();                //No viste nada, segui en 0
                                  //¿Viste algo? CHETOOO Comenza a contar los segundos asi volver para atacar
    if (sharp_left > 900) {
      Objeto_Izquierda = 1;
      Objeto_Izquierda = millis();
    }
    if (sharp_right > 900) {
      Objeto_Derecha = 1;
      Objeto_Derecha_Time = millis();
    }
  }

  if (qre_back < 500) {        //Una vez que llegaste al negro retrocede 1seg por las dudas
    MoveBackwards();
    delay (1000);
  }

//LLegamos al negro ¿Que vimos?
  
  if (Objeto_Izquierda == 1 && Objeto_Derecha == 0) {  //Si viste algo retrocede lo que contaste
    MoveBackwards();                                   //Menos el seg que ya retrocediste
    delay (Objeto_Derecha_Time - 1000);
    while (sharp_front < 1100) {
      MoveSoftRight();
    }
  }
  if (Objeto_Derecha == 0 && Objeto_Izquierda == 1) {
    MoveBackwards();
    delay (Objeto_Izquierda_Time - 1000);
    while (sharp_front < 1100) {
      MoveSoftLeft;
    }
  }
  if (Objeto_Derecha == 1 && Objeto_Izquierda == 1) {      //¿Viste de los dos lados?
    if (Objeto_Derecha_Time > Objeto_Izquierda_Time) {     //Anda por el que este mas cerca
      MoveBackwards();
      delay (Objeto_Izquierda_Time);
      while (sharp_front < 1100) {
        MoveSoftLeft();
      }
    }
    else if (Objeto_Derecha_Time < Objeto_Izquierda_Time) {
      MoveBackwards();
      delay (Objeto_Derecha_Time);
      while (sharp_front < 1100) {
        MoveSoftLeft();
      }
    }
  }

  if (Objeto_Derecha == 1) {
    MoveSoftRight();
  }
  if (Objeto_Izquierda == 1) {
    MoveSoftLeft();
  }


}

/* End of area cleaner section
--------------------------------------------------------------------------*/
/* Sumo section */

void StartSumoModality(){}

/* End of sumo section
--------------------------------------------------------------------------*/

void setup(){
    
  pinMode(PIN_LED, OUTPUT);
  digitalWrite(PIN_LED, HIGH);

  if(!display.begin(SSD1306_SWITCHCAPVCC, 0x3C)) {
    
    Serial.println(F("SSD1306 allocation failed"));
    for(;;);
  
  }

  pinMode(PIN_SELECT, INPUT_PULLUP);
  pinMode(PIN_DOWN, INPUT_PULLUP);
  
  u8g2_for_adafruit_gfx.begin(display); // Begins u8g2 for gfx library

  display.clearDisplay();

  display.drawBitmap( 0, 0, bitmap_alita, 128, 64, WHITE); // Prints teams logo

  display.display();

  delay(3000);

  pinMode(PIN_MA1, OUTPUT);
  pinMode(PIN_MA2, OUTPUT);
  pinMode(PIN_MB1, OUTPUT);
  pinMode(PIN_MB2, OUTPUT);

  pinMode(signal_input, INPUT);

}

bool release = false;

void loop() {

  // Down button system    
  if (!digitalRead(PIN_DOWN)) {
    
    if (current_screen == selection) {

      selected = static_cast<modalities>(selected + 1);
    
      if (selected >= NUM_MODALITIES) {
    
        selected = static_cast<modalities>(selected = areaCleaner);
        
      }
      
    }
    
    delay(200);
    
  }

  // Select button system

  if (!digitalRead (PIN_SELECT)) {
    
    if (current_screen == selection && selected != sprinter) {current_screen = modality;} // Displays selected screen
    else if (current_screen == selection && selected == sprinter) {current_screen = calibration;} // Displays calibration screen
    else if (current_screen == modality) {current_screen = selection;} // Area cleaner screen to menu
    else if (current_screen == flags || current_screen == calibration) {current_screen = selection;} // Flag and calibration screens to menu

    delay(200);
  
  }

  bool blink = true;

  if (current_screen == selection){
  
    Standby();

    SerialBT.end(); // Ends bluetooth connection

    progress = 128;

    release = false;

  }

  if (current_screen == modality && selected == sprinter){
  
    if (!digitalRead(PIN_DOWN)){

      release = true;

    }

    if (release == true && digitalRead(PIN_DOWN)){

      current_screen = flags;

    }

  }

  // Scroll system
  previous = static_cast<modalities>(selected - 1);

  if (previous < 0) {previous = NUM_MODALITIES - 1;}
  
  next = static_cast<modalities>(selected + 1);
  
  if (next >= NUM_MODALITIES) {next = 0;}

  DisplayMenu();

  // Calibration trigger
  if (current_screen == calibration){StartSprinterCalibration();}

  // Sumo trigger
  if (current_screen == modality && selected == sumo){StartSumoModality();}

  // Begin serial bluetooth
  else if (current_screen == modality && selected == sprinter){
    
    SerialBT.begin("Alita");

    StartTelemetry();

  }

  // Area cleaner trigger
  if (current_screen == flags && selected == areaCleaner){
    
    SerialBT.begin("Alita");

    StartAreaCleanerModality();

  }

  // Sprinter trigger
  else if (current_screen == flags && selected == sprinter){

    StartTelemetry();

    StartSprinterModality();

  }

} 